!function(){$(function(){$(".popup").each(function(){new Popup($(this))})})}();var Popup=function(o){var n=this,t=40,i=$(".popup__open"),p=o,e=p.find(".popup__lightbox"),c=p.find(".popup__close, .popup__cancel"),u=p.find(".popup__wrap"),s=p.find(".popup__content"),a=$("html"),d=$(window),r=setTimeout(function(){},1),f=function(){d.height()-2*t-u.height()>0?u.css({top:(d.height()-2*t-u.height())/2}):u.css({top:0})},h=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){p.css({overflowY:"hidden"}),a.css({overflowY:"auto",paddingRight:0}),p.removeClass("popup_opened"),p.addClass("popup_hide"),r=setTimeout(function(){p.css({overflowY:"auto"}),p.removeClass("popup_hide")},300)},g=function(){p[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){if(m($(this).attr("data-popup")),"lightbox"==$(this).attr("data-popup")){var o=$(this).parent(),n=o.css("background-image");e.css({"background-image":n})}return!1}}),u.on({click:function(o){o.stopPropagation()}}),p.on({click:function(){return l(),!1}}),c.on({click:function(){return l(),!1}})},m=function(o){v(o),a.css({overflowY:"hidden",paddingRight:h()}),p.addClass("popup_opened"),f()},v=function(o){var n=s.filter(".popup__"+o);s.css({display:"none"}),n.css({display:"block"})};n.show=function(o){o.on({click:function(){if(m($(this).attr("data-popup")),"lightbox"==$(this).attr("data-popup")){var o=$(this).parent(),n=o.css("background-image");e.css({"background-image":n})}return!1}})},g()};
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,i,n=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=n,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||(p.on({click:function(e){e.stopPropagation(),u?v():m()}}),r.on({click:function(){u&&v()}}))},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),n=$("<ul></ul>"),s=(r.scrollTop(),p.offset()),l=0,d=o.find("option:selected").index(),h=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+h+'"></div>'),o.find("option").each(function(e){var t=$(this);e==d?n.append('<li class="active">'+t.text()+"</li>"):n.append("<li>"+t.text()+"</li>")}),t.append(n),f.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:s.left,top:s.top+p.outerHeight()}),l=t.outerHeight(),l>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),i=t.niceScroll({horizrailenabled:!1})),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};n.checkOpened=function(){return u},n.close=function(){v()},b()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5wb3B1cC5qcyIsImpxdWVyeS53ZWJzdGVycy1zZWxlY3QuanMiXSwibmFtZXMiOlsiJCIsImVhY2giLCJQb3B1cCIsInRoaXMiLCJvYmoiLCJfc2VsZiIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9vYmoiLCJfbGlnaHRCb3hQb3B1cCIsImZpbmQiLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfd2luZG93Iiwid2luZG93IiwiX3RpbWVyIiwic2V0VGltZW91dCIsIl9jZW50ZXJXcmFwIiwiaGVpZ2h0IiwiY3NzIiwidG9wIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJfaGlkZSIsIm92ZXJmbG93WSIsInBhZGRpbmdSaWdodCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJfaW5pdCIsIl9vbkV2ZW50cyIsIm9uIiwicmVzaXplIiwiY2xpY2siLCJfc2hvdyIsImF0dHIiLCJwYXJlbnQiLCJwYXJlbnRCZyIsImJhY2tncm91bmQtaW1hZ2UiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiX3NldFBvcHVwQ29udGVudCIsImN1ckNvbnRlbnQiLCJmaWx0ZXIiLCJkaXNwbGF5Iiwic2hvdyIsImVsZW0iLCJXZWJzdGVyc1NlbGVjdCIsIm9wdGlvblR5cGUiLCJzaG93VHlwZSIsInBhcmFtcyIsIl9wb3B1cCIsIl9zY3JvbGwiLCJfb3B0aW9uVHlwZSIsIl9zaG93VHlwZSIsIl92aXNpYmxlIiwidmlzaWJsZSIsIl9kZXZpY2UiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiX3RleHQiLCJfYm9keSIsIl9vcGVuZWQiLCJfYWRkV3JhcCIsImN1clRleHQiLCJvcGFjaXR5Iiwid3JhcCIsImFwcGVuZCIsImJlZm9yZSIsImN1ckl0ZW0iLCJ0ZXh0IiwiZXEiLCJfaGlkZVBvcHVwIiwic3RvcCIsInNsaWRlVXAiLCJyZW1vdmUiLCJmYWRlT3V0IiwiX3NlbGVjdFZpZXdUeXBlIiwiX3Nob3dQb3B1cCIsIl9zZXRNb2JpbGVWaWV3IiwiX3NldEN1c3RvbTEiLCJzZWxlY3RzIiwibGlzdCIsIm9mZnNldCIsInNjcm9sbFRvcCIsIm1heEhlaWdodCIsImN1ckluZGV4IiwiaW5kZXgiLCJpZCIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImNoZWNrT3BlbmVkIiwiY2xvc2UiLCJpIiwid2lkdGgiLCJvdXRlcldpZHRoIiwibGVmdCIsIm91dGVySGVpZ2h0IiwibmljZVNjcm9sbCIsImhvcml6cmFpbGVuYWJsZWQiLCJzbGlkZURvd24iLCJhbmltYXRlIiwidmFsIiwidHJpZ2dlciJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSUEsRUFBRyxXQUVDQSxFQUFHLFVBQVdDLEtBQUssV0FFZixHQUFJQyxPQUFNRixFQUFFRyxhQVN4QixJQUFJRCxPQUFRLFNBQVVFLEdBR2xCLEdBQUlDLEdBQVFGLEtBQ1JHLEVBQWdCLEdBQ2hCQyxFQUFZUCxFQUFHLGdCQUNmUSxFQUFPSixFQUNQSyxFQUFrQkQsRUFBS0UsS0FBTSxvQkFDN0JDLEVBQVlILEVBQUtFLEtBQU0saUNBQ3ZCRSxFQUFRSixFQUFLRSxLQUFNLGdCQUNuQkcsRUFBWUwsRUFBS0UsS0FBTSxtQkFDdkJJLEVBQW1CZCxFQUFHLFFBQ3RCZSxFQUFVZixFQUFHZ0IsUUFDYkMsRUFBU0MsV0FBWSxhQUFjLEdBR25DQyxFQUFjLFdBQ0xKLEVBQVFLLFNBQTZCLEVBQWhCZCxFQUFzQk0sRUFBTVEsU0FBVyxFQUM3RFIsRUFBTVMsS0FBT0MsS0FBU1AsRUFBUUssU0FBNkIsRUFBaEJkLEVBQXdCTSxFQUFNUSxVQUFhLElBRXRGUixFQUFNUyxLQUFPQyxJQUFLLEtBRzFCQyxFQUFrQixXQUNkLEdBQ0lDLEdBREFDLEVBQVlD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dW5jdGlvbigpe1xuXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuXG59ICkoKTtcblxudmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgIF9saWdodEJveFBvcHVwID0gIF9vYmouZmluZCggJy5wb3B1cF9fbGlnaHRib3gnICksXG4gICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXG4gICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XG5cbiAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcblxuICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcblxuICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xuICAgICAgICB9LFxuICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXG4gICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcbiAgICAgICAgICAgIH0sIDMwMCApO1xuXG4gICAgICAgIH0sXG4gICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICB9LFxuICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBfYnRuU2hvdy5vbigge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSA9PSAnbGlnaHRib3gnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9ICQoIHRoaXMgKS5wYXJlbnQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRCZyA9IHBhcmVudC5jc3MoICdiYWNrZ3JvdW5kLWltYWdlJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xpZ2h0Qm94UG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiBwYXJlbnRCZ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9LFxuICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxuICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgX3NldFBvcHVwQ29udGVudCA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gX2NvbnRlbnRzLmZpbHRlciggJy5wb3B1cF9fJyArIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XG4gICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcbiAgICAgICAgfTtcblxuICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgIF9zZWxmLnNob3cgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICBlbGVtLm9uKCB7XG4gICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuXG4gICAgICAgICAgICAgICAgaWYoICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSA9PSAnbGlnaHRib3gnICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gJCggdGhpcyApLnBhcmVudCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50QmcgPSBwYXJlbnQuY3NzKCAnYmFja2dyb3VuZC1pbWFnZScgKTtcbiAgICAgICAgICAgICAgICAgICAgX2xpZ2h0Qm94UG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1pbWFnZSc6IHBhcmVudEJnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcblxuICAgIH07XG5cblxuICAgIF9pbml0KCk7XG59OyIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uKCl7XG4gICAgICAgICQoICdzZWxlY3QnICkuZWFjaCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIG5ldyBXZWJzdGVyc1NlbGVjdCgge1xuICAgICAgICAgICAgICAgIG9iajogJCggdGhpcyApLFxuICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IDEsXG4gICAgICAgICAgICAgICAgc2hvd1R5cGU6IDJcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH0gKTtcblxuICAgIHZhciBXZWJzdGVyc1NlbGVjdCA9IGZ1bmN0aW9uKCBwYXJhbXMgKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IHBhcmFtcy5vYmosXG4gICAgICAgICAgICBfb3B0aW9uVHlwZSA9IHBhcmFtcy5vcHRpb25UeXBlIHx8IDAsXG4gICAgICAgICAgICBfc2hvd1R5cGUgPSBwYXJhbXMuc2hvd1R5cGUgfHwgMCxcbiAgICAgICAgICAgIF92aXNpYmxlID0gcGFyYW1zLnZpc2libGUgfHwgNSxcbiAgICAgICAgICAgIF9kZXZpY2UgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKSxcbiAgICAgICAgICAgIF90ZXh0ID0gJCggJzxzcGFuIGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19pdGVtXCI+PC9zcGFuPicgKSxcbiAgICAgICAgICAgIF93cmFwID0gJCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RcIj48L2Rpdj4nICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxuICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlLFxuICAgICAgICAgICAgX3BvcHVwLCBfc2Nyb2xsO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIGN1clRleHQgPSAnJztcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLndyYXAoIF93cmFwICk7XG4gICAgICAgICAgICAgICAgX3dyYXAgPSBfb2JqLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIF93cmFwLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2Fycm93XCI+PC9kaXY+JyApO1xuICAgICAgICAgICAgICAgIF9vYmouYmVmb3JlKCBfdGV4dCApO1xuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5hdHRyKCAnc2VsZWN0ZWQnICkgPT0gJ3NlbGVjdGVkJyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9IGN1ckl0ZW0udGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIGN1clRleHQgPT0gJycgKXtcbiAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9ICBfb2JqLmZpbmQoICdvcHRpb24nKS5lcSggMCApLnRleHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RleHQudGV4dCggY3VyVGV4dCApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlUG9wdXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vcGVuZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmKCAhX3Nob3dUeXBlICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5zbGlkZVVwKCAzMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAyICkge1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5mYWRlT3V0KCAzMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfd3JhcC5yZW1vdmVDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9vcGVuZWQnICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuXG4gICAgICAgICAgICAgICAgX2FkZFdyYXAoKTtcbiAgICAgICAgICAgICAgICBfc2VsZWN0Vmlld1R5cGUoKTtcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmoub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RleHQudGV4dCggJCggdGhpcyApLmZpbmQoICdvcHRpb246c2VsZWN0ZWQnICkudGV4dCgpICk7XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIF9vcHRpb25UeXBlID09IDEgJiYgIV9kZXZpY2UgKXtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1BvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIGlmKCAhX29wdGlvblR5cGUgfHwgX2RldmljZSApe1xuICAgICAgICAgICAgICAgICAgICBfc2V0TW9iaWxlVmlldygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX29wdGlvblR5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfc2V0Q3VzdG9tMSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0Q3VzdG9tMSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3RfY3VzdG9tJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRNb2JpbGVWaWV3ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9tb2JpbGUnICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3dQb3B1cCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdHMgPSAkKCAnc2VsZWN0JyApLFxuICAgICAgICAgICAgICAgICAgICBsaXN0ID0gJCggJzx1bD48L3VsPicpLFxuICAgICAgICAgICAgICAgICAgICBjdXJTY3JvbGwgPSBfd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBfd3JhcC5vZmZzZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgY3VySW5kZXggPSBfb2JqLmZpbmQoICdvcHRpb246c2VsZWN0ZWQnICkuaW5kZXgoKSxcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBNYXRoLnJvdW5kKCBNYXRoLnJhbmRvbSgpICogMTAwMCApO1xuXG4gICAgICAgICAgICAgICAgc2VsZWN0cy5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBpZiggdGhpcyAhPT0gX29ialsgMCBdICYmIHRoaXMub2JqLmNoZWNrT3BlbmVkKCkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9vcGVuZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgX3BvcHVwID0gJCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX3BvcHVwXCIgaWQ9XCJ3ZWJzdGVycy1zZWxlY3RfX3BvcHVwJyArIGlkICsgJ1wiPjwvZGl2PicgKTtcblxuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbiggaSApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggaSA9PSBjdXJJbmRleCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQoICc8bGkgY2xhc3M9XCJhY3RpdmVcIj4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaT4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9wb3B1cC5hcHBlbmQoIGxpc3QgKTtcbiAgICAgICAgICAgICAgICBfYm9keS5hcHBlbmQoIF9wb3B1cCApO1xuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X29wZW5lZCcgKTtcblxuICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IF93cmFwLm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCArIF93cmFwLm91dGVySGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSBfcG9wdXAub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBpZiggbWF4SGVpZ2h0ID4gX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuaGVpZ2h0KCBfcG9wdXAuZmluZCggJ2xpJyApLmVxKCAwICkub3V0ZXJIZWlnaHQoKSAqIF92aXNpYmxlICk7XG4gICAgICAgICAgICAgICAgICAgIF9zY3JvbGwgPSBfcG9wdXAubmljZVNjcm9sbCgge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9yaXpyYWlsZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBfc2hvd1R5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc2xpZGVEb3duKCAzMDAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAyICkge1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjFcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuYW5pbWF0ZSggeyBvcGFjaXR5OiAxIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX3BvcHVwLmZpbmQoICdsaScgKS5vbigge1xuICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gJCggdGhpcyApLmluZGV4KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudmFsKCBfb2JqLmZpbmQoICdvcHRpb24nICkuZXEoIGluZGV4ICkuYXR0ciggJ3ZhbHVlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnRyaWdnZXIoICdjaGFuZ2UnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcbiAgICAgICAgX3NlbGYuY2hlY2tPcGVuZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIF9vcGVuZWQ7XG4gICAgICAgIH07XG4gICAgICAgIF9zZWxmLmNsb3NlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgIH07XG5cblxuICAgICAgICBfaW5pdCgpO1xuXG4gICAgfTtcblxufSApKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
